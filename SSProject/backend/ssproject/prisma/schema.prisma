generator client {
  provider = "prisma-client"
  output   = "../node_modules/@prisma/client"
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL") //Conexion a la BD utilizando .env
}

// 1. Define el Enum para los nombres de roles (basado en RF-002)
enum RoleName {
  ADMINISTRADOR
  PROFESIONAL
  SECRETARIA
  PACIENTE
}

// 2. Modelo de Rol
model Role {
  id    Int      @id @default(autoincrement())
  name  RoleName @unique // Asegura que solo exista un rol "ADMINISTRADOR"
  users User[]   // Un rol puede tener muchos usuarios
}

// 3. Modelo de Usuario
model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String   // Aquí guardaremos el hash de la contraseña
  firstName String
  lastName  String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relación con Rol: Un usuario tiene un rol
  role   Role @relation(fields: [roleId], references: [id])
  roleId Int
}